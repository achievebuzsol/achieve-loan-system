{% extends "base.html" %}

{% block content %}
<h2 class="mb-4">Edit Client</h2>

<div class="card">
    <div class="card-body">
        <form method="POST">
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Company Name <span class="text-muted">(Optional)</span></label>
                        <input type="text" class="form-control" name="company_name" value="{{ client[1] or '' }}" placeholder="Leave blank if individual">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Contact Person <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" name="contact_person" value="{{ client[2] }}" required>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Email <span class="text-danger">*</span></label>
                        <input type="email" class="form-control" name="email" value="{{ client[3] }}" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Phone <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" name="phone" value="{{ client[4] }}" required>
                    </div>
                </div>
            </div>
            
            <h5 class="mt-4 mb-3">Address Information</h5>
            
            <div class="mb-3">
                <label class="form-label">Street Address</label>
                <input type="text" class="form-control" name="street_address" value="{{ address_parts[0] if address_parts else '' }}">
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">City</label>
                        <input type="text" class="form-control" name="city" value="{{ address_parts[1] if address_parts and address_parts|length > 1 else '' }}">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Parish <span class="text-danger">*</span></label>
                        <select class="form-select" name="parish" required>
                            <option value="">Select Parish</option>
                            {% set parishes = ['Kingston', 'St. Andrew', 'Portland', 'St. Thomas', 'St. Catherine', 'St. Mary', 'St. Ann', 'Manchester', 'Clarendon', 'St. Elizabeth', 'Westmoreland', 'Hanover', 'St. James', 'Trelawny'] %}
                            {% for parish in parishes %}
                            <option value="{{ parish }}" {% if address_parts and address_parts|length > 2 and address_parts[2] == parish %}selected{% endif %}>{{ parish }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            
            <button type="submit" class="btn btn-primary">Update Client</button>
            <a href="{{ url_for('clients') }}" class="btn btn-secondary">Cancel</a>
        </form>
    </div>
</div>
{% endblock %}